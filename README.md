# Клиент серверное приложение для безопасных вычислений

### Для того чтобы установить и запустить приложения воспользуйтесь следующей инструкцией.

---

**0. Установить WSL и Linux дистрибутив (опционально)**

* Установить [WSL](https://docs.microsoft.com/en-us/windows/wslinstall)
* Установить дистрибутив Linux (протестировано на Ubuntu 20.04 LTS и Debian Bullseye)

---

**1. Обновляем базу данных с доступными пакетами и устанавливаем их**

	sudo apt update
	sudo apt upgrade

---

**2. Устанавливаем дополнительные пакеты и библиотеки**

	sudo apt install libboost-all-dev // Библиотека   Boost
	sudo apt install libssl-dev       // Библиотека   OpenSSL
	sudo apt install cmake            // Установка    CMake
	sudo apt install build-essential  // Установка    компилятора
	sudo apt install git              // Установка    Git (для Debian)

---

**3. Скачиваем Git репозиторий**
    
    git clone https://github.com/stokado/ClientServerSSL.git

---

**4. Меняем директорию**

	* cd ClientServerSSL/

---

**5. Меняем ветку**

	* git checkout linux

---

**6. Собираем проект и компилируем код**

	* mkdir build/          // папка для сконфигурированного проекта
	* cmake -B build/       // команда CMake для конфигурирования проекта в папку build/
	* cd build/             // заходим в директорию с проектом
	* cmake --build .       // команда CMake для запуска компиляции с нативным компилятором из текущей папки
	* cd ../install/bin     // заходим в директорию с установленными файлами

---

**7. Запуск бинарников (я использовал Windows Terminal запуска нескольких приложений)**

- Запускаем сервер

        sudo ./server <adress> <port> <number_of_clients>
    
**./server использует 3 аргумента:**

- `<adress>` - IP адрес серверва
- `<port>` - порт, на котором сервер будет ожидать новых подключений
- `<number_of_clients>` - максимальное количество потоков для сервера (максимальное количество клиентов)
		
Если не возникло ошибок, то сервер запущен и ожидает новых подключений.

 **_sudo_** применяется для того, чтобы сервер мог использовать порты < 1024. Мы используем порт 443 для HTTPS.
	
- Меняем терминал

- Запускаем сервер

        ./client <adress> <port> <path_to_file>

    **./client использует 3 аргумента:**
- `<host>` - IP адрес сервера
- `<port>` - порт к которому подключаемся и отправляем на него посылки
- `<path_to_data>` - путь к файлу, из которого берутся данные (относительно бинарника)

---

## Пример

- Запуск сервера

        sudo ./server 127.0.0.1 443 5

- Запуск клиента

        ./client 127.0.0.1 443 ../../data/test0.json

---

## Тестовые файлы для отправки

В корневой папке проекта в папке _**data**_ находятся тестовые файлы для отправки. Можно использовать следующие файлы для запуска клиента.

        ./client 127.0.0.1 443 ../../data/test0.json
            > max {1, 2, 0} - ответ 2, status 0 - ok
        ./client 127.0.0.1 443 ../../data/test1.json
            > test {1, 2, 0} - ответ 0, status 2 - неизвестная команда
        ./client 127.0.0.1 443 ../../data/test2.json
            > avg { } - ответ 0, status 1 - не представлены числа
        ./client 127.0.0.1 443 ../../data/test3.json
            > avg {1, 2, 4, 5} - ответ 3, status 0 - ok 
        ./client 127.0.0.1 443 ../../data/test4.json
            > median {4, 9} - ответ 6.5 (чётное количество чисел), status 0 - ok 
        ./client 127.0.0.1 443 ../../data/test5.json
            > median {4, 9, 5} - ответ 5 (нечётное количество чисел), status 0 - ok 
